<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ØªØ¬Ø± XYH - Ù…ØªØ¬Ø±Ùƒ Ø§Ù„Ù…ÙØ¶Ù„ Ù„Ù„Ù…Ù„Ø§Ø¨Ø³ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            direction: rtl;
            background-color: #f8fafc;
            color: #1e293b;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            color: #3b82f6;
        }

        .nav-menu {
            display: flex;
            gap: 30px;
        }

        .nav-menu a {
            text-decoration: none;
            color: #374151;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-menu a:hover {
            color: #3b82f6;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .search-box {
            position: relative;
        }

        .search-box input {
            border: 1px solid #d1d5db;
            border-radius: 8px;
            padding: 10px 40px 10px 15px;
            width: 250px;
            font-size: 14px;
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
        }

        .cart-btn {
            background-color: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Hero Slider */
        .hero-slider {
            position: relative;
            height: 500px;
            overflow: hidden;
            margin-bottom: 40px;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slide.active {
            opacity: 1;
        }

        .slide-content {
            background-color: rgba(0,0,0,0.4);
            color: white;
            padding: 40px;
            border-radius: 10px;
            text-align: center;
            max-width: 600px;
        }

        .slide-content h2 {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .slide-content p {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .discount-badge {
            background-color: #ef4444;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
        }

        .slider-indicators {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
        }

        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: rgba(255,255,255,0.5);
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .indicator.active {
            background-color: white;
        }

        /* Category Filter */
        .category-filter {
            background-color: white;
            padding: 20px 0;
            margin-bottom: 30px;
        }

        .category-list {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .category-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            background-color: #e5e7eb;
            color: #374151;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .category-btn.active {
            background-color: #3b82f6;
            color: white;
        }

        .category-btn:hover {
            background-color: #d1d5db;
        }

        /* Products Grid */
        .section-title {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 30px;
            color: #1e293b;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }

        .product-card {
            background-color: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            position: relative;
        }

        .discount-tag {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #ef4444;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
        }

        .product-info {
            padding: 20px;
        }

        .product-name {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .product-rating {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .star {
            color: #fbbf24;
            margin-left: 2px;
        }

        .rating-text {
            margin-right: 5px;
            color: #6b7280;
            font-size: 0.9rem;
        }

        .product-price {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .price {
            color: #ef4444;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .original-price {
            color: #9ca3af;
            text-decoration: line-through;
            margin-right: 10px;
            font-size: 0.9rem;
        }

        .buy-btn {
            background-color: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: background-color 0.3s;
        }

        .buy-btn:hover {
            background-color: #2563eb;
        }

        /* Footer */
        footer {
            background-color: #1e293b;
            color: white;
            padding: 60px 0 30px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-section h3 {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: #cbd5e1;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-links a:hover {
            color: white;
        }

        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid #334155;
            color: #94a3b8;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-menu {
                display: none;
            }

            .mobile-menu-btn {
                display: block;
            }

            .search-box input {
                width: 180px;
            }

            .slide-content h2 {
                font-size: 1.8rem;
            }

            .slide-content p {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">XYH</div>
                
                <nav class="nav-menu">
                    <a href="#" onclick="scrollToSection('home')">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                    <a href="#" onclick="scrollToSection('gym')">Ù…Ù„Ø§Ø¨Ø³ Ø¬ÙŠÙ…</a>
                    <a href="#" onclick="scrollToSection('dresses')">Ø¯Ø±ÙŠØ³Ø§Øª Ø£Ù†Ø¯ÙŠØ©</a>
                    <a href="#" onclick="scrollToSection('printing')">Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©</a>
                    <a href="#" onclick="scrollToSection('random')">Ø£Ø®Ø±Ù‰</a>
                </nav>
                
                <div class="header-actions">
                    <div class="search-box">
                        <input type="text" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬...">
                        <span class="search-icon">ğŸ”</span>
                    </div>
                    
                    <a href="shoppingbasket.html" class="cart-btn" style="text-decoration: none;">
                        <span>ğŸ›’</span>
                        <span>0</span>
                    </a>
                    
                    <button class="mobile-menu-btn">â˜°</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Slider -->
    <section class="hero-slider">
        <div id="slides-container">
            <!-- Slides will be loaded here dynamically -->
        </div>
        
        <div class="slider-indicators" id="slider-indicators">
            <!-- Indicators will be loaded here dynamically -->
        </div>
    </section>

    <!-- Category Filter -->
    <section class="category-filter">
        <div class="container">
            <div class="category-list">
                <button class="category-btn active" onclick="filterProducts('all', this)">Ø§Ù„ÙƒÙ„</button>
                <button class="category-btn" onclick="filterProducts('gym', this)">Ù…Ù„Ø§Ø¨Ø³ Ø¬ÙŠÙ…</button>
                <button class="category-btn" onclick="filterProducts('dresses', this)">Ø¯Ø±ÙŠØ³Ø§Øª Ø£Ù†Ø¯ÙŠØ©</button>
                <button class="category-btn" onclick="filterProducts('printing', this)">Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©</button>
                <button class="category-btn" onclick="filterProducts('random', this)">Ø£Ø®Ø±Ù‰</button>
            </div>
        </div>
    </section>

    <!-- Products Grid -->
    <section class="container">
        <h2 class="section-title">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>
        <div class="products-grid" id="productsGrid">
            <!-- Products will be loaded here dynamically -->
        </div>
    </section>

    <!-- Category Sections -->
    <section id="gym" class="container">
        <h2 class="section-title">Ù…Ù„Ø§Ø¨Ø³ Ø¬ÙŠÙ…</h2>
        <div class="products-grid" id="gymProducts">
            <!-- Gym products will be loaded here -->
        </div>
    </section>

    <section id="dresses" class="container">
        <h2 class="section-title">Ø¯Ø±ÙŠØ³Ø§Øª Ø£Ù†Ø¯ÙŠØ©</h2>
        <div class="products-grid" id="dressesProducts">
            <!-- Dresses products will be loaded here -->
        </div>
    </section>

    <section id="printing" class="container">
        <h2 class="section-title">Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©</h2>
        <div class="products-grid" id="printingProducts">
            <!-- Printing products will be loaded here -->
        </div>
    </section>

    <section id="random" class="container">
        <h2 class="section-title">Ø£Ø®Ø±Ù‰</h2>
        <div class="products-grid" id="randomProducts">
            <!-- Random products will be loaded here -->
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>XYH</h3>
                    <p>Ù…ØªØ¬Ø±Ùƒ Ø§Ù„Ù…ÙØ¶Ù„ Ù„Ù„Ù…Ù„Ø§Ø¨Ø³ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© ÙˆØ§Ù„Ø¯Ø±ÙŠØ³Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ©</p>
                </div>
                
                <div class="footer-section">
                    <h3>Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©</h3>
                    <ul class="footer-links">
                        <li><a href="#">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                        <li><a href="#gym">Ù…Ù„Ø§Ø¨Ø³ Ø¬ÙŠÙ…</a></li>
                        <li><a href="#dresses">Ø¯Ø±ÙŠØ³Ø§Øª Ø£Ù†Ø¯ÙŠØ©</a></li>
                        <li><a href="#printing">Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Ø§Ù„Ø¯Ø¹Ù…</h3>
                    <ul class="footer-links">
                        <li><a href="#">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©</a></li>
                        <li><a href="#">Ø§Ù„Ø´Ø­Ù†</a></li>
                        <li><a href="#">Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹</a></li>
                        <li><a href="#">Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù†Ø§</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>ØªØ§Ø¨Ø¹Ù†Ø§</h3>
                    <p>Ø§Ø¨Ù‚ Ø¹Ù„Ù‰ Ø§ØªØµØ§Ù„ Ù…Ø¹ Ø£Ø­Ø¯Ø« Ø§Ù„Ø¹Ø±ÙˆØ¶</p>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2024 XYH. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
            </div>
        </div>
    </footer>

    <script>
        // Format price function
        function formatPrice(price) {
            return new Intl.NumberFormat('ar-IQ').format(price);
        }
        let products = JSON.parse(localStorage.getItem('products')) || {
            gym: [
                { id: 1, name: "ØªÙŠØ´Ø±Øª Ø¬ÙŠÙ… Ø§Ø³ÙˆØ¯", price: 45000, originalPrice: 55000, image: "https://placehold.co/300x300/1f2937/ffffff?text=ØªÙŠØ´Ø±Øª+Ø§Ø³ÙˆØ¯", rating: 4.5 },
                { id: 2, name: "Ø´ÙˆØ±Øª Ø¬ÙŠÙ… Ø±ÙŠØ§Ø¶ÙŠ", price: 60000, originalPrice: 70000, image: "https://placehold.co/300x300/374151/ffffff?text=Ø´ÙˆØ±Øª+Ø¬ÙŠÙ…", rating: 4.3 },
                { id: 3, name: "ÙƒÙ†Ø²Ø© Ø¬ÙŠÙ… Ø«Ù‚ÙŠÙ„Ø©", price: 80000, originalPrice: 100000, image: "https://placehold.co/300x300/4b5563/ffffff?text=ÙƒÙ†Ø²Ø©+Ø¬ÙŠÙ…", rating: 4.7 },
                { id: 4, name: "Ø¬Ø§ÙƒØª Ø¬ÙŠÙ… Ø±ÙŠØ§Ø¶ÙŠ", price: 120000, originalPrice: 150000, image: "https://placehold.co/300x300/6b7280/ffffff?text=Ø¬Ø§ÙƒØª+Ø¬ÙŠÙ…", rating: 4.6 }
            ],
            dresses: [
                { id: 5, name: "Ø¯Ø±Ø³Ø© Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯", price: 90000, originalPrice: 110000, image: "https://placehold.co/300x300/dc2626/ffffff?text=Ø±ÙŠØ§Ù„+Ù…Ø¯Ø±ÙŠØ¯", rating: 4.8 },
                { id: 6, name: "Ø¯Ø±Ø³Ø© Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©", price: 90000, originalPrice: 110000, image: "https://placehold.co/300x300/0ea5e9/ffffff?text=Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©", rating: 4.7 },
                { id: 7, name: "Ø¯Ø±Ø³Ø© Ù…Ø§Ù†Ø´Ø³ØªØ±", price: 85000, originalPrice: 100000, image: "https://placehold.co/300x300/3b82f6/ffffff?text=Ù…Ø§Ù†Ø´Ø³ØªØ±", rating: 4.5 },
                { id: 8, name: "Ø¯Ø±Ø³Ø© Ù„ÙŠÙØ±Ø¨ÙˆÙ„", price: 85000, originalPrice: 100000, image: "https://placehold.co/300x300/ef4444/ffffff?text=Ù„ÙŠÙØ±Ø¨ÙˆÙ„", rating: 4.6 }
            ],
            printing: [
                { id: 9, name: "ØªÙŠØ´Ø±Øª Ø·Ø¨Ø§Ø¹Ø© Ù…Ø®ØµØµØ©", price: 50000, originalPrice: 65000, image: "https://placehold.co/300x300/8b5cf6/ffffff?text=ØªÙŠØ´Ø±Øª+Ù…Ø®ØµØµ", rating: 4.4 },
                { id: 10, name: "Ù‡ÙˆØ¯ÙŠ Ø·Ø¨Ø§Ø¹Ø© Ù…Ø®ØµØµØ©", price: 75000, originalPrice: 90000, image: "https://placehold.co/300x300/a855f7/ffffff?text=Ù‡ÙˆØ¯ÙŠ+Ù…Ø®ØµØµ", rating: 4.5 },
                { id: 11, name: "ØªÙŠØ´Ø±Øª ÙØ±ÙŠÙ‚ Ù…Ø®ØµØµ", price: 55000, originalPrice: 70000, image: "https://placehold.co/300x300/c084fc/ffffff?text=ØªÙŠØ´ÙŠØ±Øª+ÙØ±ÙŠÙ‚", rating: 4.3 },
                { id: 12, name: "ØªÙŠØ´Ø±Øª ØªØµÙ…ÙŠÙ… Ø­Ø±", price: 45000, originalPrice: 60000, image: "https://placehold.co/300x300/d8b4fe/ffffff?text=ØªØµÙ…ÙŠÙ…+Ø­Ø±", rating: 4.2 }
            ],
            random: [
                { id: 13, name: "Ù‚Ø¨Ø¹Ø© Ø±ÙŠØ§Ø¶ÙŠØ©", price: 35000, originalPrice: 45000, image: "https://placehold.co/300x300/000000/ffffff?text=Ù‚Ø¨Ø¹Ø©", rating: 4.1 },
                { id: 14, name: "Ø­Ù‚ÙŠØ¨Ø© Ø±ÙŠØ§Ø¶ÙŠØ©", price: 70000, originalPrice: 85000, image: "https://placehold.co/300x300/1e293b/ffffff?text=Ø­Ù‚ÙŠØ¨Ø©", rating: 4.4 },
                { id: 15, name: "Ø³Ø§Ø¹Ø© Ø°ÙƒÙŠØ©", price: 150000, originalPrice: 200000, image: "https://placehold.co/300x300/334155/ffffff?text=Ø³Ø§Ø¹Ø©", rating: 4.6 },
                { id: 16, name: "Ø²ÙˆØ¬ Ø§Ø­Ø°ÙŠØ© Ø±ÙŠØ§Ø¶ÙŠØ©", price: 180000, originalPrice: 220000, image: "https://placehold.co/300x300/475569/ffffff?text=Ø§Ø­Ø°ÙŠØ©", rating: 4.8 }
            ]
        };

    // Current slide index
    let currentSlide = 0;
    // will hold references to DOM slide/indicator elements (populated after loadSlides runs)
    let slideElements = [];
    let indicatorElements = [];

        // Load slides from localStorage
        function loadSlides() {
            const slides = JSON.parse(localStorage.getItem('slides')) || [
                {
                    id: 1,
                    title: "ØªÙŠØ´Ø±ØªØ§Øª Ù…Ø®ØµØµØ©",
                    subtitle: "Ø§Ø·Ø¨Ø¹ Ù…Ø§ ØªØ­Ø¨ Ø¹Ù„Ù‰ ØªÙŠØ´Ø±ØªÙƒ",
                    image: "https://placehold.co/1200x500/4f46e5/ffffff?text=ØªØ®ØµÙŠØµ+ØªÙŠØ´Ø±ØªØ§Øª",
                    discount: "20%"
                },
                {
                    id: 2,
                    title: "Ù…Ù„Ø§Ø¨Ø³ Ø¬ÙŠÙ…",
                    subtitle: "Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© ÙˆØ±Ø§Ø­Ø© ØªØ§Ù…Ø©",
                    image: "https://placehold.co/1200x500/10b981/ffffff?text=Ù…Ù„Ø§Ø¨Ø³+Ø¬ÙŠÙ…",
                    discount: "15%"
                },
                {
                    id: 3,
                    title: "Ø¯Ø±ÙŠØ³Ø§Øª Ø£Ù†Ø¯ÙŠØ©",
                    subtitle: "æ”¯æŒåŠ›åº¦ Ø§Ù†Ø¯ÙŠØ©Ùƒ Ø§Ù„Ù…ÙØ¶Ù„Ø©",
                    image: "https://placehold.co/1200x500/f59e0b/ffffff?text=Ø¯Ø±ÙŠØ³Ø§Øª+Ø£Ù†Ø¯ÙŠØ©",
                    discount: "25%"
                }
            ];

            const slidesContainer = document.getElementById('slides-container');
            const indicatorsContainer = document.getElementById('slider-indicators');
            
            // Clear existing content
            slidesContainer.innerHTML = '';
            indicatorsContainer.innerHTML = '';
            
            // Add slides
            slides.forEach((slide, index) => {
                const slideElement = document.createElement('div');
                slideElement.className = `slide ${index === 0 ? 'active' : ''}`;
                slideElement.style.backgroundImage = `url('${slide.image}')`;
                
                slideElement.innerHTML = `
                    <div class="slide-content">
                        <h2>${slide.title}</h2>
                        <p>${slide.subtitle}</p>
                        <div class="discount-badge">${slide.discount} Ø®ØµÙ…</div>
                    </div>
                `;
                
                slidesContainer.appendChild(slideElement);
                
                // Add indicator
                const indicator = document.createElement('div');
                indicator.className = `indicator ${index === 0 ? 'active' : ''}`;
                indicator.onclick = () => changeSlide(index);
                indicatorsContainer.appendChild(indicator);
            });
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø³Ù„Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const cartBtn = document.querySelector('.cart-btn span:last-child');
            if (cartBtn) {
                const totalItems = cart.reduce((sum, item) => sum + (item.quantity || 0), 0);
                cartBtn.textContent = totalItems;
            }

            loadAllProducts();
            loadSlides();
            startSlider();
        });

        // Update cart count
        function updateCartCount() {
            try {
                const cart = JSON.parse(localStorage.getItem('cart')) || [];
                const cartBtn = document.querySelector('.cart-btn span:last-child');
                if (cartBtn) {
                    const totalItems = cart.reduce((sum, item) => sum + (item.quantity || 0), 0);
                    cartBtn.textContent = totalItems;
                    console.log('updateCartCount:', totalItems);
                }
            } catch (error) {
                console.error('Error updating cart count:', error);
            }
        }

        // Load all products
        function loadAllProducts() {
            // Refresh products data from localStorage
            products = JSON.parse(localStorage.getItem('products')) || {
                gym: [],
                dresses: [],
                printing: [],
                random: []
            };
            const allProducts = [...products.gym, ...products.dresses, ...products.printing, ...products.random];
            displayProducts(allProducts, 'productsGrid');
            
            // Load category-specific products
            displayProducts(products.gym, 'gymProducts');
            displayProducts(products.dresses, 'dressesProducts');
            displayProducts(products.printing, 'printingProducts');
            displayProducts(products.random, 'randomProducts');
        }

        // Display products in a grid
        function displayProducts(productsArray, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            productsArray.forEach(product => {
                const discount = product.originalPrice > product.price ? 
                    Math.round((1 - product.price / product.originalPrice) * 100) : 0;
                
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <div class="product-image-container">
                        <img src="${product.image}" alt="${product.name}" class="product-image">
                        ${discount > 0 ? `<div class="discount-tag">${discount}% Ø®ØµÙ…</div>` : ''}
                    </div>
                    <div class="product-info">
                        <h3 class="product-name">${product.name}</h3>
                        <div class="product-rating">
                            <div class="rating-text">(${product.rating})</div>
                            <div class="stars">
                                ${generateStars(product.rating)}
                            </div>
                        </div>
                        <div class="product-price">
                            <div>
                                <span class="price">${formatPrice(product.price)} Ø¯.Ø¹</span>
                                ${product.originalPrice > product.price ? 
                                    `<span class="original-price">${formatPrice(product.originalPrice)} Ø¯.Ø¹</span>` : ''}
                            </div>
                            <button class="buy-btn" onclick="addToCart(${product.id}); updateCartCount();">
                                <span>ğŸ›’</span>
                                Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©
                            </button>
                        </div>
                    </div>
                `;
                container.appendChild(productCard);
            });
        }

        // Generate star rating HTML
        function generateStars(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                stars += i <= Math.floor(rating) ? 
                    '<span class="star">â˜…</span>' : 
                    '<span class="star" style="color: #d1d5db;">â˜…</span>';
            }
            return stars;
        }

        // Filter products by category
        function filterProducts(category, clickedBtn) {
            // Update active button
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            if (clickedBtn && clickedBtn.classList) clickedBtn.classList.add('active');

            // Load products based on category
            if (category === 'all') {
                loadAllProducts();
            } else {
                displayProducts(products[category] || [], 'productsGrid');
            }
        }

        // Add to cart function
        function addToCart(productId) {
            // Get cart from localStorage or create new one
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            
            // Find the product from all products
            const allProducts = Object.values(products).flat();
            const product = allProducts.find(p => p.id === productId);
            
            if (product) {
                // Check if product already exists in cart
                const existingItem = cart.find(item => item.id === productId);
                
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({
                        id: product.id,
                        name: product.name,
                        price: product.price,
                        image: product.image,
                        quantity: 1
                    });
                }
                
                // Prepare a sanitized copy for storage (avoid storing huge data-URLs)
                function sanitizeForStorage(cartArray) {
                    return cartArray.map(item => {
                        const img = item.image || '';
                        // if image is a data URL (base64) and very large, drop it to avoid exceeding quota
                        if (typeof img === 'string' && img.startsWith('data:')) {
                            // threshold ~150 KB
                            if (img.length > 150000) {
                                return Object.assign({}, item, { image: '' });
                            }
                        }
                        return item;
                    });
                }

                const cartForStorage = sanitizeForStorage(cart);

                try {
                    localStorage.setItem('cart', JSON.stringify(cartForStorage));
                } catch (err) {
                    console.error('localStorage.setItem failed:', err);
                    // Try a fallback: strip images entirely and try again
                    if (err && (err.name === 'QuotaExceededError' || err.code === 22 || err.number === -2147024882)) {
                        try {
                            const stripped = cart.map(({ id, name, price, quantity }) => ({ id, name, price, quantity }));
                            localStorage.setItem('cart', JSON.stringify(stripped));
                            // update in-memory cart to reflect stripped images so UI doesn't re-save big data
                            cart = cart.map(i => Object.assign({}, i, { image: '' }));
                            console.warn('Cart saved without images due to storage quota.');
                        } catch (err2) {
                            console.error('Fallback save also failed:', err2);
                            alert('ØªØ¹Ø°Ø± Ø­ÙØ¸ Ø§Ù„Ø³Ù„Ø© Ù…Ø­Ù„ÙŠØ§Ù‹ Ù„Ø£Ù† Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…ØªØµÙØ­ Ù…Ù…ØªÙ„Ø¦Ø©. Ø­Ø§ÙˆÙ„ ØªÙØ±ÙŠØº Ø¨Ø¹Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ù…ØªØµÙØ­ Ø¢Ø®Ø±.');
                        }
                    } else {
                        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­ÙØ¸ Ø§Ù„Ø³Ù„Ø©. Ø±Ø§Ø¬Ø¹ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„ Ù„Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªÙØ§ØµÙŠÙ„.');
                    }
                }

                // Update cart count and UI
                updateCartCount();
                console.log('addToCart: cart updated (in-memory):', cart);

                alert('ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©!');
            }
        }

        // Slider functionality
        function startSlider() {
            // (re)query slide elements in case they were created dynamically
            slideElements = document.querySelectorAll('.slide');
            indicatorElements = document.querySelectorAll('.indicator');

            if (!slideElements || slideElements.length === 0) return;

            setInterval(() => {
                currentSlide = (currentSlide + 1) % slideElements.length;
                updateSlider();
            }, 4000);
        }

        function changeSlide(index) {
            currentSlide = index;
            updateSlider();
        }

        function updateSlider() {
            // ensure we have fresh references
            slideElements = document.querySelectorAll('.slide');
            indicatorElements = document.querySelectorAll('.indicator');

            slideElements.forEach((slide, index) => {
                slide.classList.toggle('active', index === currentSlide);
            });

            indicatorElements.forEach((indicator, index) => {
                indicator.classList.toggle('active', index === currentSlide);
            });
        }

        // Scroll to section
        function scrollToSection(sectionId) {
            const element = document.getElementById(sectionId);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Mobile menu toggle
        document.querySelector('.mobile-menu-btn').addEventListener('click', function() {
            const navMenu = document.querySelector('.nav-menu');
            navMenu.style.display = navMenu.style.display === 'flex' ? 'none' : 'flex';
        });
    </script>
</body>
</html>

